{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Map.vue?4789","webpack:///./src/App.vue?176e","webpack:///./src/components/Map.vue?5829","webpack:///./src/utils/gtfsToGeoJson.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue?9397","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","accessToken","mapStyle","config","lng","lat","zoom","on","$event","onMapLoaded","_v","_s","crimeWeight","domProps","onSliderChange","dogParkWeight","martaWeight","travelWeight","Papa","require","stops","gtfs","results","parse","header","type","features","keys","map","id","stop_id","properties","stop_name","geometry","coordinates","parseFloat","stop_lon","stop_lat","components","MglMap","fillOpacity","colorScale","areaThreshold","h3Resolution","crimeLayer","crime90days","dogParksLayer","dogParks","travelTimeLayer","travelTimes","martaLayer","martaStations","created","mapbox","methods","displayData","console","log","createLayers","mapLayers","hexagons","combineLayers","renderHexes","Number","event","target","redistributeWeights","forEach","combined","hex","weight","normalizeLayer","createCrimeLayer","createDogParksLayer","createMartaLayer","createTravelTimeLayer","layer","h3Index","bufferPointLinear","kmToRadius","feature","travelTime","createPointsOfInterestLayer","seedTravelTimes","seedMartaStations","text","seedCrimeData","Promise","seedDogParkLocations","seedPointsOfInterest","addSource","sourceId","geojson","addLayer","geoJsonLayer","source","getSource","setData","setPaintProperty","layerId","renderAreas","interactive","paint","countPoints","bufferPoints","ring","rings","distance","step","Math","floor","km","$edgeLength","$UNITS","component","Map","Vue","geojson2h3","geoToH3","hexRing","kRing","kRingDistances","edgeLength","UNITS","productionTip","use","BootstrapVue","render","h","App","$mount"],"mappings":"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","file":"js/app.a547aa55.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-mapbox-h3-spike/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Map')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\",\"id\":\"map-container\"}},[_c('b-row',{attrs:{\"id\":\"map-row\"}},[_c('b-col',{attrs:{\"cols\":\"12\",\"md\":\"10\",\"id\":\"map-col\"}},[_c('MglMap',{attrs:{\"accessToken\":_vm.accessToken,\"mapStyle\":_vm.mapStyle,\"center\":[_vm.config.lng, _vm.config.lat],\"zoom\":_vm.config.zoom},on:{\"update:mapStyle\":function($event){_vm.mapStyle=$event},\"update:map-style\":function($event){_vm.mapStyle=$event},\"load\":_vm.onMapLoaded}})],1),_c('b-col',{attrs:{\"cols\":\"12\",\"md\":\"2\",\"id\":\"sliders\"}},[_c('p',[_vm._v(\"Crime Weight: \"+_vm._s(_vm.crimeWeight))]),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":_vm.crimeWeight},on:{\"input\":function($event){return _vm.onSliderChange($event, 'crime')}}}),_c('p',[_vm._v(\"Dog Park Weight: \"+_vm._s(_vm.dogParkWeight))]),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":_vm.dogParkWeight},on:{\"input\":function($event){return _vm.onSliderChange($event, 'dogParks')}}}),_c('p',[_vm._v(\"Marta Weight: \"+_vm._s(_vm.martaWeight))]),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":_vm.martaWeight},on:{\"input\":function($event){return _vm.onSliderChange($event, 'marta')}}}),_c('p',[_vm._v(\"Travel Time Weight: \"+_vm._s(_vm.travelWeight))]),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":_vm.travelWeight},on:{\"input\":function($event){return _vm.onSliderChange($event, 'travelTime')}}})])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const Papa = require('papaparse');\n\n\nexport function stops(gtfs) {\n    var results = Papa.parse(gtfs, { header: true });\n    var stops = results.data;\n    return {\n        type: 'FeatureCollection',\n        features: Object.keys(stops).map(function (id) {\n            return {\n                type: 'Feature',\n                id: stops[id].stop_id,\n                properties: {\n                    stop_id: stops[id].stop_id,\n                    stop_name: stops[id].stop_name\n                },\n                geometry: {\n                    type: 'Point',\n                    coordinates: [\n                        parseFloat(stops[id].stop_lon),\n                        parseFloat(stops[id].stop_lat)\n                    ]\n                }\n            };\n        })\n    };\n}","<template>\n<b-container fluid id=\"map-container\">\n  <b-row id=\"map-row\">\n    <b-col cols=\"12\" md=\"10\" id=\"map-col\">\n      <MglMap\n        :accessToken=\"accessToken\"\n        :mapStyle.sync=\"mapStyle\"\n        :center=\"[config.lng, config.lat]\"\n        :zoom=\"config.zoom\"\n        @load=\"onMapLoaded\">\n      </MglMap>\n    </b-col>\n    <b-col cols=\"12\" md=\"2\" id=\"sliders\">\n      <p>Crime Weight: {{crimeWeight}}</p>\n      <input        \n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-bind:value=\"crimeWeight\"\n          v-on:input=\"onSliderChange($event, 'crime')\"/>\n      \n      <p>Dog Park Weight: {{dogParkWeight}}</p>\n      <input        \n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-bind:value=\"dogParkWeight\"\n          v-on:input=\"onSliderChange($event, 'dogParks')\"/>\n\n      <p>Marta Weight: {{martaWeight}}</p>\n      <input        \n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-bind:value=\"martaWeight\"\n          v-on:input=\"onSliderChange($event, 'marta')\"/>\n\n      <p>Travel Time Weight: {{travelWeight}}</p>\n      <input        \n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-bind:value=\"travelWeight\"\n          v-on:input=\"onSliderChange($event, 'travelTime')\"/>\n      \n      <!-- <p>Points of Interest Weight: {{pointsOfInterestWeight}}</p>\n      <input        \n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-bind:value=\"pointsOfInterestWeight\"\n          v-on:input=\"onSliderChange($event, 'poi')\"/> -->\n    </b-col>\n  </b-row>\n</b-container>\n</template>\n\n<style>\n\n  #map-container {\n    height: 100%;\n    min-height: 100vh;\n  }\n\n  #map-row {\n    height: 100%;\n  }\n\n  .selected {\n    background-color: rgb(63, 63, 63);\n    color: white;\n  }\n\n</style>\n\n<script>\nimport Mapbox from \"mapbox-gl\";\nimport { json, text } from \"d3-fetch\";\nimport { stops } from \"@/utils/gtfsToGeoJson\";\n// import { createTravelTimeData } from \"@/utils/createTravelTimesData\";\nconst Papa = require('papaparse');\n\nimport { \n  MglMap\n} from \"vue-mapbox\";\n\nexport default {\n  components: {\n    MglMap\n  },\n  data() {\n    return {\n      accessToken: 'pk.eyJ1IjoiY2xqMDAyMCIsImEiOiJjam80b2Y4cmEwMWFrM3ZwNW9wbzZvNjF0In0.tGdbiR2A0B9bbHXo_Hg93w', // your access token. Needed if you using Mapbox maps\n      mapStyle: 'mapbox://styles/mapbox/streets-v11', // your map style\n      config: {\n        lng: -84.387595,\n        lat: 33.746605,\n        zoom: 11,\n        fillOpacity: 0.9,\n        colorScale: ['#ffffD9', '#50BAC3', '#1A468A'],\n        areaThreshold: 0.75\n      },\n      h3Resolution: 8,\n      crimeLayer: null,\n      crime90days: null,\n      crimeWeight: 1,\n      dogParksLayer: null,\n      dogParks: null,\n      dogParkWeight: 1,\n      // pointsOfInterestLayer: null,\n      // pointsOfInterest: null,\n      // pointsOfInterestWeight: 1,\n      travelTimeLayer: null,\n      travelTimes: null,\n      travelWeight: 1,\n      martaLayer: null,\n      martaStations: null,\n      martaWeight: 1\n    };\n  },\n  created() {\n    // We need to set mapbox-gl library here in order to use it in template\n    this.mapbox = Mapbox;\n    this.map = null;\n  }, \n  methods: {\n    async onMapLoaded(event) {\n      this.map = event.map;\n\n      var seeded = await this.seedData();\n      console.log(seeded);\n      this.displayData(this.map);\n    },\n    displayData(map) {\n      console.log(\"Displaying data.\");      \n      this.createLayers();\n\n      var mapLayers = [\n        // Crime is bad, so we'll subtract it instead of adding\n        {name: \"crime\", hexagons: this.crimeLayer, weight: -(this.crimeWeight)},\n        {name: \"dogParks\", hexagons: this.dogParksLayer, weight: this.dogParkWeight},\n        {name: \"marta\", hexagons: this.martaLayer, weight: this.martaWeight},\n        {name: \"traveltime\", hexagons: this.travelTimeLayer, weight: this.travelWeight},\n        // {name: \"poi\", hexagons: this.pointsOfInterestLayer, weight: this.pointsOfInterestWeight}\n      ];\n      \n      var hexagons = this.combineLayers(mapLayers);\n      this.renderHexes(map, hexagons);\n    },\n    onSliderChange(event, type) {\n      if (type == 'crime') {\n        this.crimeWeight = Number(event.target.value);\n      } else if (type == 'dogParks') {\n        this.dogParkWeight = Number(event.target.value);\n      } else if (type == 'marta') {\n        this.martaWeight = Number(event.target.value);\n      } else if (type == 'travelTime') {\n        this.travelWeight = Number(event.target.value);\n      } \n      // else if (type == 'poi') {\n      //   this.pointsOfInterestWeight = Number(event.target.value);  \n      // }      \n      console.log(\"Slider change\", type);\n\n      this.redistributeWeights();\n    },\n    redistributeWeights() {\n      console.log(\"Redistributing weights\");\n\n      var mapLayers = [\n        // Crime is bad, so we'll subtract it instead of adding\n        {name: \"crime\", hexagons: this.crimeLayer, weight: -(this.crimeWeight)},\n        {name: \"dogParks\", hexagons: this.dogParksLayer, weight: this.dogParkWeight},\n        {name: \"marta\", hexagons: this.martaLayer, weight: this.martaWeight},\n        {name: \"traveltime\", hexagons: this.travelTimeLayer, weight: this.travelWeight},\n        // {name: \"poi\", hexagons: this.pointsOfInterestLayer, weight: this.pointsOfInterestWeight}\n      ];\n\n      console.log(\"Map layers\", mapLayers);\n\n      var hexagons = this.combineLayers(mapLayers);\n      this.renderHexes(this.map, hexagons);\n    },\n    combineLayers(mapLayers) {\n      const combined = {};\n      mapLayers.forEach(({hexagons, weight}) => {\n        Object.keys(hexagons).forEach(hex => {\n          combined[hex] = (combined[hex] || 0) + hexagons[hex] * weight;\n        });\n      });\n      return this.normalizeLayer(combined);  \n    },\n    createLayers() {\n      console.log(\"Creating layers\");\n      this.crimeLayer = this.createCrimeLayer();\n      this.dogParksLayer = this.createDogParksLayer();\n      this.martaLayer = this.createMartaLayer();\n      this.travelTimeLayer = this.createTravelTimeLayer();\n      // this.pointsOfInterestLayer = this.createPointsOfInterestLayer();\n    },\n    createCrimeLayer() {\n      console.log(\"Creating crime layer\", this.crime90days);\n      const layer = {};\n      this.crime90days.forEach(({lat, lng}) => {\n        const h3Index = this.$geoToH3(lat, lng, Number(this.h3Resolution));\n        layer[h3Index] = (layer[h3Index] || 0) + 1;\n      });\n      return this.normalizeLayer(layer);      \n    },\n    createDogParksLayer() {\n        console.log(\"Creating dog parks layer\", this.dogParks);\n        // const layer = {};\n        // this.dogParks.forEach(({lat, lng}) => {\n        //   const h3Index = this.$geoToH3(lat, lng, Number(this.h3Resolution));\n        //   // Add school hex\n        //   layer[h3Index] = (layer[h3Index] || 0) + 1;\n        //   // add surrounding kRing, with less weight\n        //   this.$hexRing(h3Index, 1).forEach(neighbor => {\n        //     layer[neighbor] = (layer[neighbor] || 0) + 0.5;\n        //   });\n        // });\n        // return this.normalizeLayer(layer);\n        return this.normalizeLayer(this.bufferPointLinear(this.martaStations, this.kmToRadius(1)));\n    }, \n    createMartaLayer() {\n      console.log(\"Creating marta layer\", this.martaStations);\n      return this.normalizeLayer(this.bufferPointLinear(this.martaStations, this.kmToRadius(1)));\n    },\n    createTravelTimeLayer() {\n      console.log(\"Creating travel time layer\", this.travelTimes);\n      const layer = {};\n      this.travelTimes.features.forEach(feature => {\n        const hexagons = this.$geojson2h3.featureToH3Set(feature, Number(this.h3Resolution));\n        hexagons.forEach(h3Index => {\n          // Lower is better, so take the inverse\n          layer[h3Index] = (layer[h3Index] || 0) + 1 / feature.properties.travelTime;\n        })\n      });\n      return this.normalizeLayer(layer, true);\n    },\n    createPointsOfInterestLayer() {\n        console.log(\"Creating poi layer\", this.pointsOfInterest);\n        const layer = {};\n        this.pointsOfInterest.filter(poi => (poi.type === 'Cafes' || poi.type === 'Places to Eat' || poi.type === 'Restaurant')).forEach(({lat, lng}) => {\n        const h3Index = this.$geoToH3(lat, lng, Number(this.h3Resolution));\n          layer[h3Index] = (layer[h3Index] || 0) + 1;\n        });\n        return this.normalizeLayer(layer);\n    },\n    async seedData() {\n      console.log(\"Seeding data\");\n      this.crime90days = await this.seedCrimeData();\n      console.log(\"Crimes\", this.crime90days);\n      this.dogParks = await this.seedDogParkLocations();\n      console.log(\"Dog Parks\", this.dogParks);\n      this.martaStations = await this.seedMartaStations();\n      console.log(\"Marta stations\", this.martaStations);\n      this.travelTimes = await this.seedTravelTimes();\n      console.log(\"Travel Times\", this.travelTimes);\n      // this.pointsOfInterest = await this.seedPointsOfInterest();\n      // console.log(\"POI\", this.pointsOfInterest);\n      return \"Seeded\";\n    },\n    seedTravelTimes() {\n      return json('./travelTimes.json');\n    },\n    seedMartaStations() {\n      return text('./martaStops.txt').then((text) => {\n        return stops(text);\n      });\n    },\n    seedCrimeData() {\n      console.log(\"Seeding crime data\");\n      return new Promise(resolve => {\n          Papa.parse('https://query.data.world/s/3lnfl7oqpk3fspbleodbcu4wt4hwq5', {\n            download: true,\n            header: true,\n            complete: results => {\n              var crimes = results.data;\n              var value = Object.keys(crimes).map(function (id) {\n                    return {\n                      \"lat\": crimes[id].lat,\n                      \"lng\": crimes[id].long,\n                      \"type\": crimes[id].crime\n                    };\n                });\n              resolve(value);\n            }\n          });\n      });\n    },\n    seedDogParkLocations() {\n      return json('./dogParks.json');\n    },\n    seedPointsOfInterest() {\n      return json('https://gist.githubusercontent.com/nrabinowitz/d3a5ca3e3e40727595dd137b65058c76/raw/ded89c2acef426fe3ee59b05096ed1baecf02090/oakland-poi.json');\n    },\n    renderHexes(map, hexagons) {\n      // Transform the current hexagon map into a GeoJSON object\n      const geojson = this.$geojson2h3.h3SetToFeatureCollection(\n        Object.keys(hexagons),\n        hex => ({value: hexagons[hex]})\n      );\n\n      const sourceId = 'h3-hexes';\n      const layerId = `${sourceId}-layer`;\n\n      let source = map.getSource(sourceId);\n\n      if(!source) {\n        const geoJsonLayer = {\n            id: layerId,\n            source: sourceId,\n            type: 'fill',\n            interactive: false,\n            paint: {\n              'fill-outline-color': 'rgba(0,0,0,0)',\n            }\n        };\n\n        map.addSource(sourceId, {\n          type: 'geojson',\n          data: geojson\n        });\n        map.addLayer(geoJsonLayer);\n\n        source = map.getSource(sourceId);\n      }\n    \n      source.setData(geojson);\n\n      // Update the layer paint properties, using the current config values\n      map.setPaintProperty(layerId, 'fill-color', {\n        property: 'value',\n        stops: [\n          [0, this.config.colorScale[0]],\n          [0.5, this.config.colorScale[1]],\n          [1, this.config.colorScale[2]]\n        ]\n      });\n  \n      map.setPaintProperty(layerId, 'fill-opacity', this.config.fillOpacity);\n    },\n    renderAreas(map, hexagons) {\n      // Transform the current hexagon map into a GeoJSON object\n      const geojson = this.$geojson2h3.h3SetToFeature(\n        Object.keys(hexagons).filter(hex => hexagons[hex] > this.config.areaThreshold)\n      );\n  \n      const sourceId = 'h3-hex-areas';\n      const layerId = `${sourceId}-layer`;\n      let source = map.getSource(sourceId);\n  \n      // Add the source and layer if we haven't created them yet\n      if (!source) {\n        map.addSource(sourceId, {\n          type: 'geojson',\n          data: geojson\n        });\n        map.addLayer({\n          id: layerId,\n          source: sourceId,\n          type: 'line',\n          interactive: false,\n          paint: {\n            'line-width': 3,\n            'line-color': this.config.colorScale[2],\n          }\n        });\n        source = map.getSource(sourceId);\n      }\n\n      // Update the geojson data\n      source.setData(geojson);\n    },\n    countPoints(geojson) {\n      const layer = {};\n      geojson.features.forEach(feature => {\n        const [lng, lat] = feature.geometry.coordinates;\n        const h3Index = this.$geoToH3(lat, lng, Number(this.h3Resolution));\n        layer[h3Index] = (layer[h3Index] || 0) + 1;\n      });\n      return this.normalizeLayer(layer, true);\n    },\n    bufferPoints(geojson, radius) {\n      const layer = {};\n      geojson.features.forEach(feature => {\n        const [lng, lat] = feature.geometry.coordinates;\n        const stationIndex = this.$geoToH3(lat, lng, Number(this.h3Resolution));\n        const ring = this.$kRing(stationIndex, radius);\n        ring.forEach(h3Index => {\n          layer[h3Index] = (layer[h3Index] || 0) + 1;\n        });\n      });\n      return this.normalizeLayer(layer, true);\n    },\n    bufferPointLinear(geojson, radius) {\n      const layer = {};\n      geojson.features.forEach(feature => {\n        const [lng, lat] = feature.geometry.coordinates;\n        const stationIndex = this.$geoToH3(lat, lng, Number(this.h3Resolution));\n        // add surrounding multiple surrounding rings, with less weight in each\n        const rings = this.$kRingDistances(stationIndex, radius);\n        const step = 1 / (radius + 1);\n        rings.forEach((ring, distance) => {\n          ring.forEach(h3Index => {\n            layer[h3Index] = (layer[h3Index] || 0) + 1 - distance * step;\n          })\n        });\n      });\n      return this.normalizeLayer(layer);\n    },\n    normalizeLayer(layer, baseAtZero = false) {\n        const hexagons = Object.keys(layer);\n        // Pass one, get max\n        const max = hexagons.reduce((max, hex) => Math.max(max, layer[hex]), -Infinity);\n        const min = baseAtZero ? hexagons.reduce((min, hex) => Math.min(min, layer[hex]), Infinity) : 0;\n        // Pass two, normalize\n        hexagons.forEach(hex => {\n          layer[hex] = (layer[hex] - min) / (max - min); \n        });\n        return layer;\n    },\n    kmToRadius(km) {\n      return Math.floor(km / this.$edgeLength(Number(this.h3Resolution), this.$UNITS.km));\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=292eccf8&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <Map/>\n  </div>\n</template>\n\n<script>\nimport Map from './components/Map.vue'\n\n\nexport default {\n  name: 'App',\n  components: {\n    Map\n  }\n}\n</script>\n\n<style>\nhtml, body {\n  height: 100%;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=61cb9852&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport geojson2h3 from 'geojson2h3';\nimport { geoToH3, hexRing, kRing, kRingDistances, edgeLength, UNITS } from 'h3-js';\nimport { BootstrapVue } from 'bootstrap-vue';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nObject.defineProperty(Vue.prototype, '$geojson2h3', { value: geojson2h3 });\nObject.defineProperty(Vue.prototype, '$geoToH3', { value: geoToH3 });\nObject.defineProperty(Vue.prototype, '$hexRing', { value: hexRing });\nObject.defineProperty(Vue.prototype, '$kRing', { value: kRing });\nObject.defineProperty(Vue.prototype, '$kRingDistances', { value: kRingDistances });\nObject.defineProperty(Vue.prototype, '$edgeLength', { value: edgeLength });\nObject.defineProperty(Vue.prototype, '$UNITS', { value: UNITS });\n\nVue.config.productionTip = false\n\nVue.use(BootstrapVue);\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n"],"sourceRoot":""}